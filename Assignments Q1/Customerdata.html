<!DOCTYPE html>
<html>
  <head>
    <title>Customer Data</title>
    <link
      rel="stylesheet"
      href="../node_modules/bootstrap/dist/css/bootstrap.css"
    />
    <script src="../node_modules/jquery/dist/jquery.js"></script>
    <script src="../node_modules/jquery.cookie/jquery.cookie.js"></script>
    <script>
      $(function () {
        $("#btnRegister").click(() => {
          $.ajax({
            method: "GET",
            url: "Register.html",
          }).then((resp) => {
            $("#bodyContainer").html(resp);
            $("#btn").click(function () {
              var data = {
                Mobile: $("#Mobile").val(),
                Password: $("#Password").val(),
              };
              $.ajax({
                method: "POST",
                url: "http://127.0.0.1:3300/registercustomer",
                data: data,
              });
              alert("Registerd succesfully");
              $.ajax({
                method: "GET",
                url: "Succesfull.html",
              }).then((resp) => {
                $("#bodyContainer").html(resp);
              });
            });

            $("#Mobile").keyup(() => {
              var mobile = $("#Mobile").val();
              $.ajax({
                method: "GET",
                url: "http://127.0.0.1:3300/getcustomers",
              }).then((data) => {
                for (var item of data) {
                  if (item.Mobile == mobile) {
                    $("#userError").html("User id taken try another");
                  } else {
                    $("#userError").html("User id available");
                  }
                }
              });
            });
          });
        });
      });
    </script>
  </head>
  <body>
    <div class="row">
      <div class="col-4">
        <div class="mt-2">
          <button class="btn btn-dark" id="btnRegister">Register</button>
        </div>
      </div>
      <div class="col-8">
        <div id="bodyContainer"></div>
      </div>
    </div>
  </body>
</html>
